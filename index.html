<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Checklist Schimb</title>
  <style>
    .step { display: none; }
    .step.active { display: block; margin-bottom: 20px; }
    #successMessage { color: green; font-weight: bold; margin-top: 20px; display: none; }
  </style>
</head>
<body>

  <form id="checklistForm">
    <div class="step active">
      <label>1. Au rămas Production Orders deschise?</label><br>
      <input type="radio" name="po_deschise" value="Da" required> Da<br>
      <input type="radio" name="po_deschise" value="Nu"> Nu<br>
    </div>

    <div class="step">
      <label>2. 5S este OK?</label><br>
      <input type="radio" name="5s_ok" value="Da" required> Da<br>
      <input type="radio" name="5s_ok" value="Nu"> Nu<br>
    </div>

    <div class="step">
      <label>3. Sunt echipamentele în stare bună de funcționare?</label><br>
      <input type="radio" name="echipamente_ok" value="Da" required> Da<br>
      <input type="radio" name="echipamente_ok" value="Nu"> Nu<br>
    </div>

    <div class="step">
      <label>4. S-a făcut schimbul de informații?</label><br>
      <input type="radio" name="informatii_schimb" value="Da" required> Da<br>
      <input type="radio" name="informatii_schimb" value="Nu"> Nu<br>
    </div>

    <div class="step">
      <label>5. S-au ridicat ambalajele?</label><br>
      <input type="radio" name="ambalaje_ridicate" value="Da" required> Da<br>
      <input type="radio" name="ambalaje_ridicate" value="Nu"> Nu<br>
    </div>

    <div class="step">
      <label>6. Observații:</label><br>
      <textarea name="observatii" rows="4" cols="40" required></textarea><br>
    </div>

    <button type="button" id="nextBtn">Următorul</button>
    <button type="submit" style="display: none;" id="submitBtn">Trimite</button>
  </form>

  <div id="successMessage">✅ Formularul a fost trimis cu succes!</div>

  <script>
    const steps = document.querySelectorAll(".step");
    let currentStep = 0;
    const nextBtn = document.getElementById("nextBtn");
    const submitBtn = document.getElementById("submitBtn");
    const successMsg = document.getElementById("successMessage");

    nextBtn.addEventListener("click", () => {
      const input = steps[currentStep].querySelector("input:checked, textarea");
      if (!input || (input.tagName === "TEXTAREA" && input.value.trim() === "")) {
        alert("Te rog răspunde la întrebare.");
        return;
      }

      steps[currentStep].classList.remove("active");
      currentStep++;

      if (currentStep < steps.length) {
        steps[currentStep].classList.add("active");
        if (currentStep === steps.length - 1) {
          nextBtn.style.display = "none";
          submitBtn.style.display = "inline";
        }
      }
    });

    document.getElementById("checklistForm").onsubmit = async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);

      const response = await fetch('https://script.google.com/macros/s/AKfycbwvG2fSEVWlPMIPJ05CUDjK2IqnEqyk6CkldFNsdXEVqvAHQ-pxY23DpEiURSVydPH0/exec', {
        method: 'POST',
        body: formData
      });

      const data = await response.json();
      if (data.result === "Trimis cu succes!") {
        document.getElementById("checklistForm").style.display = "none";
        successMsg.style.display = "block";
      }
    };
  </script>

</body>
</html>
